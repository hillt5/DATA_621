---
title: "Data 621 - HW5"
author: "Devin Teran, Atina Karim, Tom Hill, Amit Kapoor"
date: "5/23/2021"
output:
  html_document:
    highlight: pygments
    number_sections: no
    theme: flatly
    toc: yes
    toc_float: yes
  pdf_document:
    toc: TRUE
    toc_depth: 2 
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, error=FALSE, warning=FALSE, message=FALSE, fig.align = "center")
```


```{r loadData, include=FALSE}
# Libraries


library(DataExplorer)
library(visdat)
library(dplyr)
library(tidyr)
library(MASS)
library(psych)
library(AER)
library(mlr)
library(mice)
library(imputeTS)

set.seed(621)
```


```{r data}

fires <- read.csv('https://raw.githubusercontent.com/hillt5/DATA_621/master/Final%20Project/uci-forest-fires/forestfires.csv', stringsAsFactors = TRUE) 

```



# Overview

For the final assignment, the team will be looking at a dataset of forest fires identified in Montesinho Natural Park, located in the mountainous northeast of Portugal. The original paper was published by a nearby university with the intention of offering low-cost prediction based on available meteorological measurements. Their model used information collected in realtime to identify fires without more specialized equipment - sattelite imaging and smoke scanners. 


The objective is to build a model that predicts the burned area of the forest given the explanatory variables. Additionally, a temporal model could be developed to understand which day and weather patterns offer the highest risk conditions.



# Data Exploration

Below is the description of the variables of interest in the data set.

|VARIABLE NAME|DEFINITION|
|--|----|---|
|X|x-axis spatial coordinate within the Montesinho park map: 1 to 9|
|Y|y-axis spatial coordinate within the Montesinho park map: 2 to 9|
|month| month of the year: "jan" to "dec" |
|day|day of the week: "mon" to "sun"|
|FFMC*|Fine Fuel Moisture Code index from the FWI system: 18.7 to 96.20|
|DMC*|Duff Moisture Code index from the FWI system: 1.1 to 291.3 |
|DC*| Drought Code index from the FWI system: 7.9 to 860.6 |
|ISI*|Iniital Spread Index from the FWI system: 0.0 to 56.10|
|temp|temperature in Celsius degrees: 2.2 to 33.30|
|RH|relative humidity in %: 15.0 to 100|
|wind|wind speed in km/h: 0.40 to 9.40 |
|rain|outside rain in mm/m2 : 0.0 to 6.4 |
|area|the burned area of the forest (in ha): 0.00 to 1090.84 |  


*The FWI, or Fire Weather Index system, is an estimator developed in Canada for assessing fire risk. It ranges 0-20 and considers weather and fire conditions withing a critical period prior at the start of the fire.  The FFMC is a composite of rain, humidity, temperature and wind, DMC is rain, humidity and temperature, DC is rain and temperature, and finally ISI is a fire behavior index. One element of FWI, the buildup index, was not included as this is an indicator of the bulk fuel on the ground and not ascertainable from meteorology.  


Source : Cortez, Paulo & Morais, A.. (2007). A Data Mining Approach to Predict Forest Fires using Meteorological Data. 



## Statistics

All of the data are numeric and here is the statistics summary of all the predictors.

```{r, describe}
fires %>%  describe()
```

## Numeric Variables

Exxcept for the day and month columns, all of these variables are numeric.  The original authors mention that area is likely to require log or some other transformation for best contribution to a model.  

```{r, histograms}
plot_histogram(fires, geom_histogram_args = list("fill" = "tomato4"))
```


```{r, distinct-values}
tibble(fires %>% summarize_all(n_distinct))
```


For distinct values, it appears that this region of Portugal does not have very routine rainfall.   



## Correlations

The `corrplot` below shows the correlation between predictor variables by ignoring the missing entries.

```{r, corrplot}
fire_corr <- fires[-c(3,4)]
corrplot::corrplot(cor(fire_corr), type = 'lower')
```

From the above `corrplot`, it is apparent that 

* `X` and `Y` are positively correlated, which is perhaps spurious or owing to the lack of distinct values for these variables.
* `temp` is positively correlated with several of the indices, 
* `temp` and `RH` are negatively correlated.








## Missing Values

At first glance, there are no missing values in this dataset. However, only days with information about fires are added to the original dataset.The original paper mentions that readings spanned between January 2000 to December 2003, which would be a span of 1460 days as opposed to the 517 observations in the dataset. Since forest fires tend to be seasonal during a dry season, there may be a relationship to the data available for each month.  

```{r, months}


fires %>% group_by(month) %>% summarize(n())



```



The most observations are available for the month of August by a large margin.  March, July and February are the next most common months. January, May, and November have 2, 2, and 1 fires reported.

Looking at the August number, it's evident that multiple fires were happening per day during this time period.  This creates an interesting twist as multiple fires could strain firefighting resources and offers the prospect of considering a logistical or count as response variable if weather data were available for the missing dates.  It's also possible that the extra August observations there are duplicate entries as the observations were collected from two sources throughout the study.  


# Data Preparation


## Missing Values



# Build Models

```{r, }

summary(lm(fires, formula = area ~.))


```


# Select Models

# Code Appendix

```{r ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE}
```

















